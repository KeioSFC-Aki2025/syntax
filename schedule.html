<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Course Schedule Viewer</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#e6f0ff;
  --card:#ffffff;
  --muted:#555555;
  --accent:#1e3a8a;
  --accent-2:#3b82f6;
  --success:#16a34a;
  --danger:#1e3a8a;
  --radius:12px;
  font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg) 0%, #ffffff 40%);}
.wrap{max-width:1200px;margin:0 auto 32px auto;padding:20px}
header {
  /* 全幅表示 */
  width: 100%;
  /* 上部に余白を設定（元々.wrapにあったマージンを代替） */
  padding-top: 32px;
  /* 既存のflex設定をリセット */
  display: block;
}
.header-content {
  max-width: 1200px; /* .wrapと同じ最大幅 */
  margin: 0 auto;    /* 中央揃え */
  padding: 0 20px;   /* .wrapと同じ左右のパディング */
}
h1{margin:0;font-weight:700;font-size:1.6rem;color:var(--accent)}
p.lead{
  /* マージン調整（下部に追加） */
  margin: 4px 0 16px 0;
  /* 丸みのあるフォントを指定 */
  font-family: 'M PLUS Rounded 1c', 'Inter', system-ui, sans-serif;
  /* フォントサイズを大きく */
  font-size: 1.15rem;
  /* 行間を広げて読みやすく */
  line-height: 1.7;
  /* 色を濃いアクセントカラー(var(--accent) = #1e3a8a)に設定 */
  color: var(--accent);
  /* 装飾を追加して目立たせる */
  background-color: #f0f9ff; /* ごく薄い水色の背景 */
  padding: 15px 20px;
  border-radius: var(--radius); /* カードと同じ角丸を適用 */
  border-left: 6px solid var(--accent-2); /* 左側にアクセントライン */
}
.course-header {
  text-align: center;
  margin-bottom: 24px;
  padding-bottom: 20px;
  /* 下に境界線を追加して区切りを明確に */
  border-bottom: 1px solid #e6eef8;
}
/* メインタイトル */
.course-header .title {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--accent);
  margin: 0;
}
/* サブタイトル */
.course-header .subtitle {
  font-size: 1.2rem;
  /* 色を少し落ち着かせる */
  color: var(--muted);
  margin: 8px 0;
}
/* 詳細（学期・時限） */
.course-header .details {
  margin: 16px 0;
  font-size: 1rem;
  /* 詳細も少し目立つように色付け */
  color: var(--accent);
  line-height: 1.5;
}
/* 短縮タイトル */
.course-header .short-title {
  font-size: 1.4rem;
  font-weight: 600;
  color: var(--accent);
  margin: 0;
}
.grid{display:grid;grid-template-columns:1fr 380px;gap:20px;margin-top:20px}
@media (max-width:880px){ .grid{grid-template-columns:1fr;} }
.card{
	background:var(--card);
	border-radius:var(--radius);
	box-shadow:0 6px 18px rgba(15,23,42,0.06);
	padding:20px;
	}
.controls{display:flex;gap:10px;flex-wrap:wrap}
.seg{
  display:flex;
  background:#cfe0ff;
  border-radius:999px;
  padding: 4px;
  margin: 0;
}
/* 修正箇所: トグルボタンのスタイル */
.seg button{
  border:0;
  background:transparent;
  padding:10px 14px;
  border-radius:999px;
  cursor:pointer;
  font-weight:600;
  color:var(--muted); 
  font-size: 16px; 
  
 /* position: relative; と z-index: 10; を削除 */
  line-height: 1.2; 
  
  -webkit-tap-highlight-color: transparent;
  
}
.seg button.active{
  background:linear-gradient(180deg,var(--accent),var(--accent-2));
  color:#fff;
  
  font-size: 16px; 
}
select, input[type="search"]{padding:8px 10px;border-radius:10px;border:1px solid #e6eef8;background:white;font-size:0.95rem}
.tablewrap{overflow:auto;margin-top:14px;border-radius:8px}
table{
	width:100%;
	border-collapse:collapse;
/*	min-width:720px;*/
	white-space: pre-line;
	table-layout: fixed;
	}
/* PC表示時の列幅設定（より広い画面での動作） */
table colgroup col:nth-child(1) { width: 8% !important; }  /* Session: 狭く */
table colgroup col:nth-child(2) { width: 40% !important; } /* Class: より広く */
table colgroup col:nth-child(3) { width: 17% !important; } /* Docs: 狭く */
table colgroup col:nth-child(4) { width: 35% !important; } 
thead th{
	position:sticky;
	top:0;
	background:linear-gradient(180deg,#ffffff,#e6f0ff);
	padding:12px 14px;
	text-align:left;
	font-size:0.95rem;
	border-bottom:1px solid #e6eef8
}
tbody td{padding:12px 14px;border-bottom:1px dashed #eef4fb;vertical-align:top}
tbody tr:hover{background:linear-gradient(90deg,rgba(59,130,246,0.05),transparent)}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#dbeafe;border:1px solid #bfdbfe;color:var(--accent);font-weight:600}
.video-list{
  margin:0;
  padding:0;
  list-style-type: none;
}
.video-list li{margin:6px 0}
.meta{color:var(--muted);font-size:0.9rem}
.hw-due{ color:#381d9b; font-weight:700; }
.hw-past{ color:#9ca3af; font-weight:600 }
li::marker {
  content: "";
  font-size: 1.2em;
}
body {
  font-size: 16px;  /* PC用 */  
}
@media (max-width: 768px) {
  body {
    font-size: 14px; /* タブレット用 */
  }
}
@media (max-width: 480px) {
  body {
    font-size: 8px; /* スマホ用 */
	/* padding : 0;*/
  }
  button {
    /*  垂直パディングを増やし、タップ領域を広げる */
    padding: 6px 25px !important;
    display: inline-block; 
    font-size: 8px !important
	}
  table th {
    font-size: 7px !important;
  }
   select {
    font-size: 8px !important;
    padding: 4px 2px;
  }
  input, textarea {
    font-size: 8px !important;
    padding: 4px 2px !important;
  }
  
  .wrap {
    max-width: 100%; /* 最大幅の制限を解除 */
    margin: 0;      /* 上下のマージンを解除し、左右の自動中央寄せも解除 */
    padding: 0;     /* 全体のパディングを解除 */
  }
  /* .card クラスもパディングを調整または解除 */
  .card {
    border-radius: 0; /* 角丸をなくして画面端に合わせる（任意） */
    padding: 10px;    /* カードの内部パディングを小さくする（例: 20pxから10pxへ） */
  }
  
  .tablewrap {
		width: 100%;          /* 画面幅に合わせる */
		max-width: 100%;      /* 余計に大きくならないように */
		overflow-x: auto;     /* 万が一はみ出す場合は横スクロール */
		margin: 0px 0;   /* 上下14px, 左右は自動で中央寄せ */
		padding: 0;
		width: 100vw;
  }
  table {
		min-width: auto;   /* スマホでは横幅制限を外す */
		table-layout: fixed; /* 内容に合わせて列幅を調整 */
		border-collapse: collapse;  /* 余分な隙間をなくす */
		border-spacing: 0
	}
	th, td {
		font-size: 7px !important;
		padding:5px  5px;        
		word-break: break-word;  
	}
	 /* 列幅の調整 */
 /* 列幅の調整 */
   /*  4列構成に対応 */
  table colgroup col:nth-child(1) { width: 8%; }  
  table colgroup col:nth-child(2) { width: 40%; }  
  table colgroup col:nth-child(3) { width: 10%; }  
  table colgroup col:nth-child(4) { width: 42%; } 
  #scheduleTable {
    width: 100%;
    table-layout: fixed; /* 列幅を均等割り */
    border-collapse: collapse;
    border-spacing: 0;
  }
  
  #scheduleTable th, #scheduleTable td {
    font-size: 7px;       /* 小さめにして列を収める */
    padding: 5px 5px;     /* 列間の余白を最小化 */
    word-break: break-word; /* 長い文字列は折り返し */
    white-space: normal;   /* nowrap を解除 */
    /* overflow: hidden;*/  
  }
  
 
  .video-btn, a.handout-link {
   /* パディングを上下左右均等に小さく */
    padding: 3px 6px !important; 
    /* 縦に並ぶときのボタン間のマージンを削除 */
    margin: 0 !important; 
    /* ボタンを左寄せに */
    text-align: left; 
	
    display: block;
    font-size: 7px; /* ←変更後 */
  }
  
  
    /* Videos列のセル内のテキスト全般 */
    table td.col4, 
    /* Videos列のボタンのテキスト */
    .col4 .video-btn {
        /* フォントサイズを7pxからさらに小さく */
        font-size: 6px !important; 
    }
    
    /* ボタンのパディングも調整してスペースを詰める */
    .col4 .video-btn {
        padding: 4px 6px !important; 
    }
  
}
.grid {
  display: flex;
  margin: 0 0;
  padding: 0;
  width: 100%;       /* デフォルト: PCでは6割 */
  max-width: 800px; /* 上限幅 */
  }
  
  .sessionTableWrapper {
  display: block;  /* gridの影響を外す */
  overflow-x: auto;
}
.video-btn{
  display: inline-block; /* aタグをボタンとして表示するため追加 */
  text-decoration: none; /* aタグの下線を消去 */
  background:var(--accent-2);
  color:#fff;
  border:none;
  padding:10px 14px; /* パディングを少し増加 */
  border-radius:6px;
  cursor:pointer;
  font-size:10pt;
  text-align:left;
  margin-bottom: 4px; /* 縦に並んだ際の余白 */
}
/* ★ 変更点4: 日付が未来の期限の場合のボタン色 */
.hw-due .video-btn {
  background: var(--accent-2); /* 期限切れの場合の背景色 */
  color: #fff;
}
/* ★ 変更点5: 日付が過去の期限の場合のボタン色 */
.hw-past .video-btn {
  background: #cccccc; /* 期限内の背景色 */
  color: #666666;
}
a.handout-link{
	font-weight:600;
	padding:8px 12px;
	white-space: nowrap;
	border-radius:6px;
	border:1px solid rgba(59,130,246,0.12);
	text-decoration:none;
	background:#eef6ff;
	color:var(--accent-2);
	display:inline-block;
	margin-right:6px
}
.video-btn.disabled, .handout-link.disabled {
  background: #cccccc !important;
  color: #666666 !important;
  border-color: #aaaaaa !important;
  cursor: not-allowed;
  opacity: 0.7;
}
footer{margin-top:18px;color:var(--muted);font-size:0.9rem;text-align:center}
</style>
</head>
<body>
    <header>
      <div class="header-content">
        <div class="course-header">
            <h1 class="title">Introduction to Theoretical Linguistics (Syntax)</h1>
            <p class="subtitle">Visualizing the structure of language</p>
            <div class="details">
                Fall 2025<br>
                Friday, the 3rd period
            </div>
            <h2 class="short-title">Introduction to Syntax</h2>
        </div>
        <p class="lead">
          This course is one of the foundational lectures in contemporary theoretical linguistics. It focuses particularly on the formal aspects of linguistic expressions, introducing theoretical tools necessary for <b>analyzing the hierarchical structure of (words and) sentences</b>. As outlined in the schedule below, the course offers a comprehensive treatment ranging from the internal structure of words to larger syntactic domains such as verb phrases, noun phrases, and full sentences.
          </p>
      </div>
    </header>
  <div class="wrap">
    <div class="card">
		<!-- 場所１：トグルボタンの指定 -->
		<div class="controls">
			<div class="seg" role="tablist" aria-label="view mode">
                <button id="btnFull" role="tab" aria-selected="false">Full Schedule</button>
				<button id="btnSession" class="active" role="tab" aria-selected="true">By Session</button>
			</div>
			<select id="sessionSelect" aria-label="Select session"></select>
			<input type="search" id="searchBox" placeholder="Search class / reading / homework">
		</div>
		<!-- 場所2：コメント -->
		<div class="card" style="margin-top:14px;padding:10px;color:#1e40af;font-weight:600" id="generalComment">
			<!-- General Comment displayed here -->
			<p>Class on November 7 is cancelled.</p>
		</div>
		<!-- 場所3：スケジュールの表 -->
		<div class="tablewrap">  
			<table id="scheduleTable">
    		<colgroup>
		        <col class="col1">
		        <col class="col2">
		        <col class="col3"> 
		        <col class="col4">    
			</colgroup>
    <thead>
      <tr>
            <th class="col1" style="width: 5%;"></th>
            <th class="col2" style="width: 28%;">Class</th>
            <th class="col3" style="width: 32%;">Docs</th>
            <th class="col4" style="width: 35%;">Videos for next session</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
		</div>
    </div>
  
   <p></p>
   <div class="card">
      <h3>Quick Tips</h3>
      <ul style="margin-top:8px;color:var(--muted)">
        <li>Select "By Session" and choose session from dropdown to view one session only.</li>
        <li>Select "Full Schedule" to see all sessions.</li>
        <li>Videos appear as buttons that open the link in a new tab.</li>
      </ul>
    </div>
  </div>
  <script>
// =====================
// Embedded scheduleData
// =====================
const scheduleData =
[
  {
    "session": "0",
    "class": "Preliminaries<br><br>Watch before 10/02",
    "date": "",
    "video": "1 Introduction to linguistics (34:39)<https://www.youtube.com/watch?v=cHDqpiJoqpk>, 2 Prescriptivism vs descriptivism (17:48)<https://www.youtube.com/watch?v=mO4WQB1BIq0>",
    "deadlineHW": "10/2/2025",
    "handout": "",
    "deadlineClass": "10/2/2025",
    "date2": ""
  },
  {
    "session": "1",
    "class": "Chapter 1<br><br>What is syntax?",
    "date": "10/3/2025",
    "video": "1 Parts of Speech(20:32)<https://www.youtube.com/watch?v=EzlNj8NNX2A&list=PL1ymN_px3GFQZfoDLgH9AK1CoKuWq2hkm>,  2 Functional Parts of Speech (13:17)<https://www.youtube.com/watch?v=sk5iO_uFgKw&list=PL1ymN_px3GFQZfoDLgH9AK1CoKuWq2hkm&index=2>, 3 Subcategories (22:53)<https://www.youtube.com/watch?v=0JvcF6SrDFQ&list=PL1ymN_px3GFQZfoDLgH9AK1CoKuWq2hkm&index=3>",
    "deadlineHW": "10/9/2025",
    "handout": "Slides<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_6e808762f50a478abde6a2945f193ee6.pdf>",
    "deadlineClass": "10/3/2025",
    "date2": "10/3"
  },
  {
    "session": "2",
    "class": "Chapter 2<br><br>Parts of speech",
    "date": "10/10/2025",
    "video": "1 Structure (9:51)<https://www.youtube.com/watch?v=JoUk6RsUgCs&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=1>, 2 Constituency tests (17:47)<https://www.youtube.com/watch?v=KlUe3TEeDus&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=2>, 3 PS rules [1] (25:14)<https://www.youtube.com/watch?v=KlUe3TEeDus&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=2>,,  (The following video highly recommended, but optional), 4 *Exercise (20:12)<https://www.youtube.com/watch?v=Svd7AuAcGDs&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=11>",
    "deadlineHW": "10/16/2025",
    "handout": "Assignment 1 (pdf)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_c6070fab55144944a2a4c710af1366b0.pdf>, Assignment 1 (docx)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_ef0f92d5e063453b98fbb834831fe141.docx>, Slides (Class 2)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_00d57b08245c49f5a9d981ee3f163a4c.pdf>,Don't open the following until you are instructed, Exercise 7<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_3ceb587949ba431ea058b6767c79e6d7.pdf>",
    "deadlineClass": "10/10/2025",
    "date2": "10/10"
  },
  {
    "session": "3",
    "class": "Chapter 3<br><br>Constituency, <br>trees and rules (I): <br>NP, AP, and AdvP",
    "date": "10/17/2025",
    "video": "1 A review (10:30) <https://youtu.be/N2nbP7IUBzc>, 2 PS rules [2] (26:01)<https://www.youtube.com/watch?v=HzJQMerlzic&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=4>, 3 How to draw a tree (17:30)<https://www.youtube.com/watch?v=1bsOQweQMA0&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=5>, 4 Ambiguity (10:27)<https://www.youtube.com/watch?v=1sYPVkstAoU&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=6>,  (The following video is highly recommended, but optional),5 *Exercise (18:53)<https://www.youtube.com/watch?v=_2hlrVdGGfk&list=PL1ymN_px3GFRrK8wjw3duZoly6MejvT2A&index=12>",
    "deadlineHW": "10/23/2025",
    "handout": "Assignment 2 (pdf)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_06d96766e8624f6bab0d76a67fcfdc33.pdf>, Assignment 2 (docx) <https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_8ec2a39e88314c329df62db239970c20.docx>, Slides (Class 3)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_e475a64b943f43049ecd76707750b7cd.pdf>",
    "deadlineClass": "10/17/2025",
    "date2": "10/17"
  },
  {
    "session": "4",
    "class": "Chapter 3<br><br>Constituency, <br>trees and rules (II):<br>PP, VP, TP, and CP",
    "date": "10/24/2025",
    "video": "There is no new video to watch this week. Instead please work on Ex 1 & 2 in Assignment 3 and come to class prepared with your answers.",
    "deadlineHW": "10/30/2025",
    "handout": "Assignment 3 (pdf)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_dcc5abd9b7e6450e85a9657db7b77e2c.pdf>, Assignment 3 (docx)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_9bdf812cb806415b912168c175a93bf1.docx>, Slides (Class 4)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_aafe2884cb6d41a9a706c841ccae8874.pdf>",
    "deadlineClass": "10/24/2025",
    "date2": "10/24"
  },
  {
    "session": "5",
    "class": "Chapter 3<br><br>Constituency, <br>trees and rules (III): <br> Practice day",
    "date": "10/31/2025",
    "video": "1 Structural relations (14:00)<https://youtu.be/-qE1hMlf3oY>, After watching the video, please do the following assignment and submit it online (by midnight Nov 7), Assignment 4(pdf)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_e971d6d8e195450d885789cc7d51e3f0.pdf>, Assignment 4 (docx)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_4663bc21294f4f45bf084722714245da.docx>",
    "deadlineHW": "11/6/2025",
    "handout": "Slides (class 5)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_c01d1e7b9f294f24bbd0bcec0cc5c4cf.pdf>",
    "deadlineClass": "10/31/2025",
    "date2": "10/31"
  },
  {
    "session": "6",
    "class": "Chapter 4<br><br>Structural relation",
    "date": "",
    "video": "1 N' (12:09)<https://www.youtube.com/watch?v=vlF1TBhlass&list=PL1ymN_px3GFQKseKiqqlBenGiptrUaEev>, 2 bar-levels (17:13)<https://www.youtube.com/watch?v=pdo6k_RqL3Y&list=PL1ymN_px3GFQKseKiqqlBenGiptrUaEev&index=2>, 3 X-bar rules (10:14)<https://www.youtube.com/watch?v=bZOnuM7x4tY&list=PL1ymN_px3GFQKseKiqqlBenGiptrUaEev&index=3>, ",
    "deadlineHW": "11/13/2025",
    "handout": "Answer key for Assgn 4<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_7dded8a5ed5842f183636c03f0d5148f.pdf>[after 11/08/2025]",
    "deadlineClass": "11/7/2025",
    "date2": ""
  },
  {
    "session": "7",
    "class": "Chapter 6<br><br>X-bar syntax (I)",
    "date": "11/14/2025",
    "video": "Optional extra credit assignment:  you will earn extra points if you solve and submit it (Due 23:59 Nov 21). , Bonus HW (docx) <https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_9f783657cb44431c8e46016cc31ee476.docx>, Bonus HW (pdf) <https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_9878d8a6b3054c69acb997ecc5599595.pdf>",
    "deadlineHW": "11/27/2025",
    "handout": "Assignment 5 (pdf)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_85effd18ccc1431e8275d7a822555a57.pdf>, Assignment 5 (docx) <https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_f2d31936e80849728a1e178e9293d76a.docx> , Slides (Class 7)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_bfbc147f673a42349926cee167179805.pdf>[after 11/15/2025]",
    "deadlineClass": "11/14/2025",
    "date2": "11/14"
  },
  {
    "session": "",
    "class": "No class (Mitasai)",
    "date": "11/21/2025",
    "video": "1 Compl/adjunct (25:53) <https://www.youtube.com/watch?v=1avF6TiLnmA&list=PL1ymN_px3GFQKseKiqqlBenGiptrUaEev&index=4>, 2 How to draw trees (13:14)<https://www.youtube.com/watch?v=-wpfH32fjdA&list=PL1ymN_px3GFQKseKiqqlBenGiptrUaEev&index=5>, 3 X-bar parameters (7:35)<https://www.youtube.com/watch?v=BCW7u8-DyvQ&list=PL1ymN_px3GFQKseKiqqlBenGiptrUaEev&index=6>",
    "deadlineHW": "",
    "handout": "Answer key for Bonus HW<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_7975e806d52a4b449d8a978369c51be3.pdf>[after 11/22/2025]",
    "deadlineClass": "",
    "date2": "11/21"
  },
  {
    "session": "8",
    "class": "Chapter 6<br><br>X-bar syntax (II)",
    "date": "11/28/2025",
    "video": "1 DPs (12:25)<https://www.youtube.com/watch?v=xf36OW8RNso&list=PL1ymN_px3GFTiSvLpSkrZ-Iu5Adn2pa0o>, 2 TPs (17:56)<https://www.youtube.com/watch?v=MOtouOMwCQ4&list=PL1ymN_px3GFTiSvLpSkrZ-Iu5Adn2pa0o&index=2>, 3 CPs (13:05)<https://www.youtube.com/watch?v=YgLYDx9boqk&list=PL1ymN_px3GFTiSvLpSkrZ-Iu5Adn2pa0o&index=3>",
    "deadlineHW": "12/4/2025",
    "handout": "Assignment 6 (pdf)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_611aad0fbf034f43aee620c92a86e026.pdf>, Assignment 6 (docx) <https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_9b1cf07032c047fcbc97dadf94bd094f.docx>, Answer key (Assgn 6)<https://91fefc4d-047b-4ea2-946f-b7b816f5c8be.usrfiles.com/ugd/91fefc_f08fdbef452a4ad5b25935c85f2998f5.pdf>[after 11/29/2025]",
    "deadlineClass": "11/28/2025",
    "date2": "11/28"
  },
  {
    "session": "9",
    "class": "Chapter 7<br><br>Extending X-bar <br>Theory [Part 1]",
    "date": "12/5/2025",
    "video": "1 From Tense to Voice (22:04)<https://www.youtube.com/watch?v=hvVMnlVuo9c&list=PL1ymN_px3GFTiSvLpSkrZ-Iu5Adn2pa0o&index=4>, 2 From TP to VoiceP (12:36)<https://www.youtube.com/watch?v=Dkfsi6xlxEw&list=PL1ymN_px3GFTiSvLpSkrZ-Iu5Adn2pa0o&index=5>, 3 Specifier and Subjects (6:26)<https://www.youtube.com/watch?v=idE-9lYRY-4&list=PL1ymN_px3GFTiSvLpSkrZ-Iu5Adn2pa0o&index=6>",
    "deadlineHW": "12/11/2025",
    "handout": "",
    "deadlineClass": "12/5/2025",
    "date2": "12/5"
  },
  {
    "session": "10",
    "class": "Chapter 7<br><br>Extending X-bar <br>Theory [Part 2]",
    "date": "12/12/2025",
    "video": "1 Overgeneration (8:30)<https://www.youtube.com/watch?v=KZHbArrgnrA&list=PL1ymN_px3GFR9rsqOu6DJ3W0ri31zdcru>, 2 Thematic relations (9:31)<https://www.youtube.com/watch?v=17JjiDJ7H40&list=PL1ymN_px3GFR9rsqOu6DJ3W0ri31zdcru&index=2>, 3 Theta roles (19:42)<https://www.youtube.com/watch?v=Z9JaClNzR-E&list=PL1ymN_px3GFR9rsqOu6DJ3W0ri31zdcru&index=3>, 4 Expletives and EPP (11:07)<https://www.youtube.com/watch?v=xKJYA9iCQ4g&list=PL1ymN_px3GFR9rsqOu6DJ3W0ri31zdcru&index=4>",
    "deadlineHW": "12/18/2025",
    "handout": "",
    "deadlineClass": "12/12/2025",
    "date2": "12/12"
  },
  {
    "session": "11",
    "class": "Chapter 8<br><br>Theta Theory",
    "date": "",
    "video": "1 Selection (13:35)<https://www.youtube.com/watch?v=rR7L20BRYYA&list=PL1ymN_px3GFRWwZwX4R6N6_bBseZTY1qb>, 2 Auxiliaries (23:42)<https://www.youtube.com/watch?v=cJ5iv3th4iQ&list=PL1ymN_px3GFRWwZwX4R6N6_bBseZTY1qb&index=2>, 3 Do support (5:36)<https://www.youtube.com/watch?v=TNr1S-07uSY&list=PL1ymN_px3GFRWwZwX4R6N6_bBseZTY1qb&index=3>, Be Have and Do (5:16)<https://www.youtube.com/watch?v=Qnx8_p5gvUw&list=PL1ymN_px3GFRWwZwX4R6N6_bBseZTY1qb&index=4>",
    "deadlineHW": "12/25/2025",
    "handout": "",
    "deadlineClass": "12/19/2025",
    "date2": ""
  },
  {
    "session": "12",
    "class": "Chapter 9<br><br>Theta Grids and <br>Functional Categories",
    "date": "12/26/2025",
    "video": "1 V-to-T (33:41)<https://www.youtube.com/watch?v=rRRF__W9zBg&list=PL1ymN_px3GFTyelzNeuNO3zDU-e6U2jUz>, 2 T-to-C (11:06)<https://www.youtube.com/watch?v=an-GGTWdPj0&list=PL1ymN_px3GFTyelzNeuNO3zDU-e6U2jUz&index=2>",
    "deadlineHW": "1/8/2026",
    "handout": "",
    "deadlineClass": "12/26/2025",
    "date2": "12/26"
  },
  {
    "session": "13",
    "class": "Chapter 10<br><br>Head Movement",
    "date": "1/9/2026",
    "video": "1 Raising (9:16)<https://www.youtube.com/watch?v=xUmSd_DcsxA&list=PL1ymN_px3GFSbR0m-HEdSKQEgmsc2Y8-v>, 2 Case Theory (18:29)<https://www.youtube.com/watch?v=1SUpzwS8n44&list=PL1ymN_px3GFSbR0m-HEdSKQEgmsc2Y8-v&index=2>, 3 Passives (16:02)<https://www.youtube.com/watch?v=dhd1WELhyXk&list=PL1ymN_px3GFSbR0m-HEdSKQEgmsc2Y8-v&index=3>, 4 Unaccusatives (11:09) <https://www.youtube.com/watch?v=8qwguC47LTY&list=PL1ymN_px3GFSbR0m-HEdSKQEgmsc2Y8-v&index=4>",
    "deadlineHW": "1/22/2026",
    "handout": "",
    "deadlineClass": "1/9/2026",
    "date2": "1/9"
  },
  {
    "session": "14",
    "class": "Chapter 11<br><br>DP Movement [Part 1]",
    "date": "1/23/2026",
    "video": "",
    "deadlineHW": "1/29/2026",
    "handout": "",
    "deadlineClass": "1/23/2026",
    "date2": "1/23"
  },
  {
    "session": "Test",
    "class": "Final exam",
    "date": "",
    "video": "",
    "deadlineHW": "",
    "handout": "",
    "deadlineClass": "",
    "date2": ""
  }
]
;
const GeneralComment = "";
// =====================
// UI elements
// =====================
const btnSession     = document.getElementById('btnSession');
const btnFull        = document.getElementById('btnFull');
const sessionSelect  = document.getElementById('sessionSelect');
const tbody = document.querySelector('#scheduleTable tbody');
const searchBox = document.getElementById('searchBox');
const generalCommentDiv = document.getElementById('generalComment');
// ----------------------
// Utilities
// ----------------------
function parseDeadlineAsLocal(deadlineStr){
  if(!deadlineStr) return null;
  const parts = deadlineStr.split('/').map(x=>parseInt(x,10));
  if(parts.length<3 || parts.some(isNaN)) return null;
  const [m,d,y] = parts;
  // 期限は指定日の終わり (23:59:59)
  return new Date(y,m-1,d,23,59,59);
}
/* ↓↓↓ 追加: 利用開始日時(00:00:00)を取得する関数 ↓↓↓ */
function parseAvailableFromAsLocal(dateStr){
  if(!dateStr) return null;
  const parts = dateStr.split('/').map(x=>parseInt(x,10));
  if(parts.length<3 || parts.some(isNaN)) return null;
  const [m,d,y] = parts;
  // 利用開始は指定日の始まり (00:00:00)
  return new Date(y, m-1, d, 0, 0, 0);
}
/* ↑↑↑ 追加 ↑↑↑ */
/**
 * 汎用パーサ: 改行・カンマで分割し、
 * 各パートについて "ラベル<url>" の形式を検出して {label, url} を返す。
 * url が見つからなければ url=null。
 */
function parseEntries(fieldStr){
  if(!fieldStr) return [];
  try {
    // split on newline or comma (with optional spaces) but keep meaningful tokens
    const parts = fieldStr.split(/\n|,(?=\s)|,(?=\S)|, /).map(s=>s.trim()).filter(Boolean);
    const entries = [];
    // regex to capture "anything <url>" and optional "[after date]" (case-insensitive)
    /* ↓↓↓ 変更: [after 日付] をオプションでキャプチャ ↓↓↓ */
    const regex = /^(.*?)<([^>]+)>(?:\s*\[after\s+([^\]]+)\])?$/i;
    parts.forEach(p=>{
      const m = p.match(regex);
      if(m){
        /* ↓↓↓ 変更: availableAfterStr を追加 ↓↓↓ */
        const availableAfterStr = m[3] ? m[3].trim() : null;
        entries.push({
          label: m[1].trim(),
          url: m[2].trim(),
          availableAfterStr: availableAfterStr
        });
      } else {
        /* ↓↓↓ 変更: availableAfterStr を追加 ↓↓↓ */
        entries.push({label: p, url: null, availableAfterStr: null});
      }
    });
    return entries;
  } catch(e){
    return [];
  }
}
/* ↓↓↓ 追加: 直近の未来のセッションIDを見つける関数 ↓↓↓ */
/**
 * 現在日時から見て、まだ終了していない直近の有効なセッションIDを見つける。
 * deadlineClass または date を基準日とする。
 * すべて終了している場合は、最後の有効なセッションを返す。
 */
function findUpcomingSessionId() {
    const today = new Date();
    // 1. 直近の未来のセッションを探す
    for (const item of scheduleData) {
        // 優先順位: deadlineClassフィールド > dateフィールド
        const dateStr = item.deadlineClass || item.date;
        if (dateStr) {
            // parseDeadlineAsLocal は指定日の 23:59:59 を返す
            const sessionDateEnd = parseDeadlineAsLocal(dateStr);
            // セッション終了日時が現在時刻より未来（または同時刻）であれば、それが直近のセッション
            if (sessionDateEnd && today <= sessionDateEnd) {
                // セッションIDが有効（空ではない）ことを確認
                if (item.session !== null && item.session !== undefined && item.session !== "") {
                   return String(item.session);
                }
                // セッションIDが無効な場合（例: "No class"）は次のループへ
            }
        }
    }
    // 2. 未来のセッションが見つからなかった場合、最後の有効なセッションを探す（フォールバック）
    for (let i = scheduleData.length - 1; i >= 0; i--) {
        const item = scheduleData[i];
        if (item.session !== null && item.session !== undefined && item.session !== "") {
          return String(item.session);
        }
    }
    return null;
}
/* ↑↑↑ 追加 ↑↑↑ */
// ----------------------
// Rendering
// ----------------------
function init(){
  generalCommentDiv.textContent = GeneralComment;
  // fill session select
 scheduleData.forEach(item=>{
  const opt = document.createElement('option');
  opt.value = String(item.session);
  
  // item.class から <br> または <br/> タグを削除する処理を追加
  const classText = item.class.replace(/<br\s*\/?>/gi, ''); 
  
  // 変更したテキストを使用
  opt.textContent = `Class ${item.session}:${classText}`;
  sessionSelect.appendChild(opt);
});
  const upcomingSessionId = findUpcomingSessionId();
  // 取得したIDがドロップダウンリストに存在するか確認してから設定
  if (upcomingSessionId !== null && sessionSelect.querySelector(`option[value="${upcomingSessionId}"]`)) {
    sessionSelect.value = upcomingSessionId;
  } else if (scheduleData.length > 0) {
    // 万が一有効なセッションが一つも見つからなかった場合のフォールバック
    sessionSelect.value = String(scheduleData[0].session);
  }
  setMode('session');
  btnSession.addEventListener('click',()=>setMode('session'));
  btnFull.addEventListener('click',()=>setMode('full'));
  sessionSelect.addEventListener('change',()=>{ if(btnSession.classList.contains('active')) renderBySession(sessionSelect.value); });
  searchBox.addEventListener('input',()=>{ const mode = btnFull.classList.contains('active') ? 'full' : 'session'; if(mode==='full') renderFull(); else renderBySession(sessionSelect.value); });
}
function setMode(mode){
  if(mode==='session'){
    btnSession.classList.add('active'); btnSession.setAttribute('aria-selected','true');
    btnFull.classList.remove('active'); btnFull.setAttribute('aria-selected','false');
    if(!sessionSelect.value) sessionSelect.value = String(scheduleData[0].session);
    renderBySession(sessionSelect.value);
  } else {
    btnFull.classList.add('active'); btnFull.setAttribute('aria-selected','true');
    btnSession.classList.remove('active'); btnSession.setAttribute('aria-selected','false');
    renderFull();
  }
}
function filterText(item,text){
  if(!text) return true;
  text = text.toLowerCase();
  return (item.class.toLowerCase().includes(text) || (item.reading && item.reading.toLowerCase().includes(text)) || (item.comment && item.comment.toLowerCase().includes(text)));
}
function renderBySession(sessionId){
  const item = scheduleData.find(i=>String(i.session)===String(sessionId));
  tbody.innerHTML = '';
  if(!item) return;
  if(!filterText(item,searchBox.value)) return;
  tbody.appendChild(createRow(item));
}
function renderFull(){
  tbody.innerHTML='';
  const searchText = searchBox.value;
  scheduleData.forEach(item=>{
    if(filterText(item,searchText)) tbody.appendChild(createRow(item));
  });
}
function createRow(item){
  const tr = document.createElement('tr');
  const today = new Date();
  const deadlineDate = parseDeadlineAsLocal(item.deadlineClass);
  const deadlineDate2 = parseDeadlineAsLocal(item.deadlineHW);
  const hwClass = deadlineDate ? (today <= deadlineDate ? 'hw-due' : 'hw-past') : '';
  const hwClass2 = deadlineDate2 ? (today <= deadlineDate2 ? 'hw-due' : 'hw-past') : '';
  const tdSession = document.createElement('td');
  tdSession.textContent = item.session;
  // ★ 変更点1: tdSession に hwClass を追加
  tdSession.className = "col1 " + hwClass;
   const tdClass = document.createElement('td');
  // item.class の内容をそのままHTMLとして設定
  const classContent = item.class || ''; 
  const dateContent = item.date2 || ''; // date2を取得
  // HTMLとして挿入。既存の classContent に <br> が含まれていることを期待。
  // date2がある場合、その前に強制的に <br> で改行を挿入。
  tdClass.innerHTML = classContent + (dateContent ? '<br>' + dateContent : ''); 
  
  tdClass.className = "col2 " + hwClass;
  const tdHandout = document.createElement('td');
  tdHandout.className = "col3 " + hwClass; 
  
  // item.handout の文字列をパース処理にかける
  const handoutRaw = (item.handout || '').replace(/<br\s*\/?>/gi, '\n');
  const handoutEntries = parseEntries(handoutRaw);
  
  // パース結果を元に要素を生成
  handoutEntries.forEach((entry, index) => {
    // 2行目以降の場合、改行(<br>)を挿入する
    if (index > 0) {
      tdHandout.appendChild(document.createElement('br'));
    }
       if (entry.url) {
      // URLがある場合はリンク(aタグ)を生成
      const a = document.createElement('a');
      a.className = 'handout-link'; // 既存のリンクスタイルを再利用
      a.textContent = entry.label;
        /* ↓↓↓ 追加: アクティベーション日時チェック (today変数は関数の冒頭で定義済み) ↓↓↓ */
        let isAvailable = true;
        if (entry.availableAfterStr) {
          // parseDeadlineAsLocal は指定日の 23:59:59 を返す
          const availableDateBoundary = parseDeadlineAsLocal(entry.availableAfterStr);
          // 現在時刻(today)がその日時以前（その日を含む）であれば無効
          if (availableDateBoundary && today <= availableDateBoundary) {
            isAvailable = false;
          }
        }
        if (isAvailable) {
        /* ↑↑↑ 追加 ↑↑↑ */
          a.href = entry.url;
          a.target = '_blank'; /* ←変更後 */
          a.rel = 'noopener noreferrer';
        /* ↓↓↓ 追加 ↓↓↓ */
        } else {
          // 無効な場合の処理
          a.classList.add('disabled');
          a.setAttribute('aria-disabled', 'true');
          // マウスオーバーでいつから有効か表示
          if (entry.availableAfterStr) {
            a.title = `Available from ${entry.availableAfterStr}`;
          }
        }
        /* ↑↑↑ 追加 ↑↑↑ */
      tdHandout.appendChild(a);
    } else {
      // URLがない場合は通常のテキストとして追加
      tdHandout.appendChild(document.createTextNode(entry.label));
    }
  });
 // Videos column
  const tdVideos = document.createElement('td');
  tdVideos.textContent=item.comment || ''; 
  tdVideos.className = "col4 " + hwClass2; 
  const videos = parseEntries(item.video);
  if(videos.length){
    const ul = document.createElement('ul'); ul.className='video-list';
    videos.forEach(v=>{
      const li = document.createElement('li');
         if(v.url){
        const anchor = document.createElement('a');
        anchor.className='video-btn';
        anchor.textContent=v.label;
        /* ↓↓↓ 追加: アクティベーション日時チェック ↓↓↓ */
        let isAvailable = true;
        if (v.availableAfterStr) {
          // parseDeadlineAsLocal は指定日の 23:59:59 を返す
          const availableDateBoundary = parseDeadlineAsLocal(v.availableAfterStr);
          // 現在時刻(today)がその日時以前（その日を含む）であれば無効
          if (availableDateBoundary && today <= availableDateBoundary) {
            isAvailable = false;
          }
        }
        if (isAvailable) {
        /* ↑↑↑ 追加 ↑↑↑ */
          anchor.href = v.url;
          anchor.target = '_blank'; /* ←新しいタブで開く設定に変更 */
          /* ↓セキュリティ対策のため追加することを推奨します */
          anchor.rel = 'noopener noreferrer';
        /* ↓↓↓ 追加 ↓↓↓ */
        } else {
          // 無効な場合の処理
          anchor.classList.add('disabled');
          anchor.setAttribute('aria-disabled', 'true');
          // マウスオーバーでいつから有効か表示
          if (v.availableAfterStr) {
            anchor.title = `Available after ${v.availableAfterStr}`;
          }
        }
        /* ↑↑↑ 追加 ↑↑↑ */
        li.appendChild(anchor);
      } else {
        li.textContent=v.label;
      }
      ul.appendChild(li);
    });
    tdVideos.appendChild(ul);
  }
  
// 最終的な行への追加処理
  // [tdSession, tdClass, tdDate, tdHandout, tdVideos] のうち tdDate を削除
  [tdSession, tdClass, tdHandout, tdVideos].forEach(td=>tr.appendChild(td));
  return tr;
}
document.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
